<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
   
  <link href="https://fonts.googleapis.com/css?family=Pacifico|Permanent+Marker|Satisfy&display=swap"
  rel="stylesheet" />

<link href="https://fonts.googleapis.com/css?family=Montserrat&display=swap" rel="stylesheet">

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.1.9/css/uikit.min.css" />

<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.5.0/css/bootstrap-datepicker.css"
  rel="stylesheet">
  <link rel="stylesheet" href="style.css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.5.0/js/bootstrap-datepicker.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.1.9/js/uikit.min.js">
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.1.9/js/uikit-icons.min.js"></script>

    <title>Update Information</title>
</head>
<body onload="value()">
 
    <div class="uk-visible@m"style="background-color:#153373; border:1px solid transparent;height:40px;overflow:hidden ">
        <ul style="list-style-type: none;padding:5px;">
          <li style="float:right; margin-right:15px;"><a style="text-decoration: none;">Search field</a></li>
          <li style="float:right;margin-right:15px;"><a style="text-decoration: none;">login button</a></li>
    
    
        </ul>
    
      </div>
    
      <nav class=" uk-navbar-container uk-visible@m" style="height:70px;" uk-navbar>
        <div class=" uk-navbar-left " style="overflow:hidden">
          <ul class="uk-navbar-nav">
            <li>
              <a style="color:#1a275b !important;">About Us</a></li>
            <li><a style="color:#1a275b !important;">Events</a></li>
            <li><a style="color:#1a275b !important;" href="#">Message From VC</a></li>
            <li><a style="color:#1a275b !important;" href="#">Feedback</a></li>
            <!-- <li class="uk-active"><a href="#">Student Testimonials</a></li> -->
    
          </ul>
        </div>
        <div class="uk-navbar-center  " style="margin-top:-16px;overflow:hidden">
          <li style="list-style-type: none;">
            <img src="Images/logo.jpeg" style="z-index: -1;" class="uk-box-shadow-large logo">
          </li>
    
        </div>
        <div class=" uk-navbar-right uk-visible@m" style="overflow:hidden">
          <ul class="uk-navbar-nav ">
            <li><a style="color:#1a275b !important;">Alumni Stories</a></li>
            <li><a style="color:#1a275b !important;">Gallery</a></li>
            <li><a style="color:#1a275b !important;" href="#">Contact Us</a></li>
            <li><a style="color:#1a275b !important;" href="#">News</a></li>
    
          </ul>
        </div>
    
    
      </nav>
      <div class=" uk-hidden@m" style="background-color:#153373;"uk-navbar>
        <div>
            <img src="Images/logo.jpeg"  height="40px" width="40px"class="uk-box-shadow-large">
        </div>
        <div class="uk-navbar-right">
             
    
                <button class="uk-button uk-button-default" type="button" uk-toggle="target: #offcanvas-nav"
                             style=" border: none;"><span uk-icon="icon: menu" style="color: white;"></span></button>
                
        </div>
      </div>
    
    
                 
       <div id="offcanvas-nav" uk-offcanvas="overlay: true">
                    <div class="uk-offcanvas-bar">
        
                        <ul class="uk-nav uk-nav-default">
                            <li class="uk-active"><a href="#">About Us</a></li>
                            <li class="uk-nav-divider"></li>
                            <li class="uk-active"><a href="#">Login</a></li>
                            <li class="uk-nav-divider"></li>
                            <li class="uk-active"><a href="#">Message from VC</a></li>
                            <li class="uk-nav-divider"></li>
                            <li class="uk-active"><a href="#">Student Testimonials</a></li>
                            <li class="uk-nav-divider"></li>
                            <li class="uk-active"><a href="#">Feedback</a></li>
                            <li class="uk-nav-divider"></li>
                            <li class="uk-active"><a href="#">Contact Us</a></li>
                            <li class="uk-nav-divider"></li>
                            <li class="uk-active"><a href="#">Job Openings</a></li>
                            <li class="uk-nav-divider"></li>
                            <li class="uk-active"><a href="#">Photo Gallery</a></li>
                            <li class="uk-nav-divider"></li>
                            <li class="uk-active"><a href="#">Events invite notice</a></li>
                            <li class="uk-nav-divider"></li>
                            <li class="uk-active"><a href="#">News Room</a></li>
                            <li class="uk-nav-divider"></li>
                            <li class="uk-active"><a href="#">Group Members</a></li>
                            <li class="uk-nav-divider"></li>
                        </ul>
        
                    </div>
                
                  </div> 
    
    
      <div >
            <!-- <button class="uk-modal-close-default" type="button" uk-close></button> -->
        
            <div class="uk-margin-large-top">
              <h2 class="uk-modal-title uk-text-center">Registration Form</h2>
              <form class="uk-grid-small" uk-grid>
        
        
                <form class="uk-grid-small uk-margin-large-top" uk-grid>
                  <div class="uk-flex uk-flex-column uk-align-center" uk-form-custom>
                    <img src="http://style.anu.edu.au/_anu/4/images/placeholders/person_8x10.png"
                      class="uk-width-small uk-height-small" uk-img>
        
                    <input type="file">
                    <button class="uk-button uk-button-primary uk-margin-large-top" type="button">Upload</button>
                  </div>
        
                  <!-- Number authentication alphanumeric value maybe check for the length -->
                  <div class="uk-width-1-1@s">
                    <label id="invalid"></label>
                    <input class="uk-input" placeholder="Aur ID" id="aurId" maxlength="12">
                  </div>
                  <!-- only for alpha value -->
        
                  <div class="uk-width-1-2@s uk-form-controls">
        
                    <input class="uk-input" placeholder="Name" id="name">
                    <label class="uk-text-danger" id="invalid1"></label>
                  </div>
        
                  <!-- leave it for rigth noww i have code that is made for it -->
                  <div class="uk-width-1-2@s uk-form-controls">
                    <input type="tel" class="uk-input" value="+91" placeholder="Phone Number" id="phoneNumber">
                    <label class="uk-text-danger" id="invalid2"></label>
        
                  </div>
        
                  <!-- check for this also  -->
                  <div class="uk-width-1-3@s">
                    <select class="uk-select" id="option1" required>
                      <option>Course</option>
                      <option>Amity School Of Engeering and technology</option>
                      <option>BHM</option>
                      <option>Biotech</option>
                      <option>Amity School Of Hospitality</option>
                      <option>Amity School Of lAw</option>
                      <option>BHM</option>
                    </select>
                    <label class="uk-text-danger" id="invalid3"></label>
        
                  </div>
        
                  <!-- only check that it is not empty and the year gap should be equal to  4 -->
                  <div class="uk-width-1-3@s">
                    <input class="uk-input" type="text" placeholder="Start Year" id="year" readonly>
                    <label class="uk-text-danger" id="invalid4"></label>
        
                  </div>
                  <!-- depends on you -->
                  <div class="uk-width-1-3@s">
                    <input class="uk-input" type="text" placeholder="End Year" id="year1" readonly>
                    <label class="uk-text-danger" id="invalid5"></label>
        
                  </div>
                  <!-- depends on you -->
                  <!-- <div class="uk-width-1-3@s">
                                <input class="uk-input" type="text" placeholder="Date Of Birth" id="dob" readonly>
                            </div> -->
        
                  <!-- E-mail auth -->
                  <div class="uk-width-1-2@s">
                    <input class="uk-input" type="text" placeholder="E-mail Personal" id="emailp">
                    <label class="uk-text-danger" id="invalid6"></label>
                  </div>
        
                  <!-- e-mail auth -->
                  <div class="uk-width-1-2@s">
                    <input class="uk-input" type="text" placeholder="E-mail Official" id="emailo">
                    <label class="uk-text-danger" id="invalid7"></label>
        
                  </div>
        
                  <div class="uk-width-1-2@s">
                    <input class="uk-input" type="text" placeholder="Linkedin Id" id="linkId">
                    <label class="uk-text-danger" id="invalid8"></label>
        
                  </div>
        
                  <div class="uk-width-1-2@s">
                    <input class="uk-input" type="text" placeholder="Skype Id" id="skyId">
                    <label class="uk-text-danger" id="invalid9"></label>
        
                  </div>
        
                  <div class="uk-width-1-3@s">
                    <input class="uk-input" type="text" placeholder="Current Company..." id="cucom">
                    <label class="uk-text-danger" id="invalid10"></label>
        
                  </div>
        
                  <div class="uk-width-1-3@s">
                    <input class="uk-input" type="text" placeholder="Designation" id="designation">
                    <label class="uk-text-danger" id="invalid11"></label>
                  </div>
        
                  <div class="uk-width-1-3@s">
                    <input class="uk-input" type="text" placeholder="location" id="location">
                    <label class="uk-text-danger" id="invalid12"></label>
        
                  </div>
        
                  <div class="uk-width-1-1@s">
                    <input class="uk-input" type="text" placeholder="Address Of Communication" id="address">
                    <label class="uk-text-danger" id="invalid13"></label>
                  </div>
        
                  <div class="uk-align-center">
        
                    <button type="button" class="uk-button uk-button-primary" onclick="sumbit()">Sumbit</button>
                  </div>
            </div>
          </div>
        
          </form>
        
          <script src="https://www.gstatic.com/firebasejs/7.1.0/firebase-app.js"></script>
          <script src="https://www.gstatic.com/firebasejs/6.6.1/firebase-auth.js"></script>
          <script src="https://www.gstatic.com/firebasejs/6.6.1/firebase-database.js"></script>
        
          <!-- TODO: Add SDKs for Firebase products that you want to use
               https://firebase.google.com/docs/web/setup#available-libraries -->
        
          <script>
            // Your web app's Firebase configuration
            var firebaseConfig = {
              apiKey: "AIzaSyD0lotM6kyH6o8wcDx-RjLcuVNvGAWKTVE",
              authDomain: "alumni-24c48.firebaseapp.com",
              databaseURL: "https://alumni-24c48.firebaseio.com",
              projectId: "alumni-24c48",
              storageBucket: "alumni-24c48.appspot.com",
              messagingSenderId: "734371845562",
              appId: "1:734371845562:web:5fc4bd8fa9fec40d6cf983"
            };
            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);
          </script>
        
        <script>
        $(document).ready(function () {
    $("#year").datepicker({
        minViewMode: 2,
        format: 'yyyy'
    });
    $("#year1").datepicker({
        minViewMode: 2,
        format: 'yyyy'
    });
    // $("#dob").datepicker({
    //     minViewMode: 4,
    //     format: 'dd/m/yyyy'
    // });
});
function value(){
   console.log(localStorage.getItem('node')); 
 if(localStorage.getItem('node')){
    var db=firebase.database();
db.ref('/alumni_info/'+localStorage.getItem('node')+'/').once('value',function(data){
    console.log(data.val());
    
    document.getElementById('address').value=data.val().Address;
    document.getElementById('aurId').value=data.val().AurId;
    document.getElementById('cucom').value=data.val().Company;
    document.getElementById('option1').value=data.val().Course;
    document.getElementById('designation').value=data.val().Designation;
    document.getElementById('name').value=data.val().Name;
    document.getElementById('phoneNumber').value=data.val().Phone;
    console.log(data.val().Year);
    var saal=data.val().Year;
    console.log(saal);
    var year4=saal.split("-");
    console.log(year4);
    document.getElementById('year').value=year4[0];
    document.getElementById('year1').value=year4[1];
    document.getElementById('linkId').value=data.val().linkdin;
    document.getElementById('location').value=data.val().location;
    document.getElementById('emailo').value=data.val().omail;
    document.getElementById('emailp').value=data.val().pemail;
    document.getElementById('skyId').value=data.val().skypeId;
});
}
 else{
     alert("There is no node of your Data");
 }
}
function sumbit() {
    var aurId1 = document.getElementById('aurId').value;
    var aurId2 = document.getElementById('aurId');
    var name1 = document.getElementById('name').value;
    var name2 = document.getElementById('name');
    var phoneNumber1 = document.getElementById('phoneNumber').value;
    var phoneNumber2 = document.getElementById('phoneNumber');
    var select = document.getElementById('option1').value;
    var select1 = document.getElementById('option1');
    var syear = $('#year').val();
    var eyear = $('#year1').val();
    console.log(syear, eyear);
    // var dob1 = $('#dob').val();
    var pemail = document.getElementById('emailp').value;
    var pemail1 = document.getElementById('emailp');
    var oemail = document.getElementById('emailo').value;
    var oemail1 = document.getElementById('emailo');
    var linkId1 = document.getElementById('linkId').value;
    var linkId2 = document.getElementById('linkId');
    var skyId1 = document.getElementById('skyId').value;
    var skyId2 = document.getElementById('skyId');
    var curcom = document.getElementById('designation').value;
    var curcom1 = document.getElementById('designation');
    var company = document.getElementById('cucom').value;
    var company1 = document.getElementById('cucom');
    var locate1 = document.getElementById('location').value;
    var locate2 = document.getElementById('location');
    var adder = document.getElementById('address').value;
    var adder1 = document.getElementById('address');
    var alphaExp = /^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$/;
    var emailExp = /^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/;
    if (name1 !== "" && name1.match(alphaExp)) {
        if (select !== "Course") {
            if (syear !== "") {
                if (eyear !== "") {
                    if (pemail !== "" || pemail.match(emailExp)) {
                        if (oemail !== "" || oemail.match(emailExp)) {
                            if (linkId1 !== "") {
                                if (skyId1 !== "") {
                                    if (company !== "") {
                                        if (curcom !== "" && curcom.match(alphaExp)) {
                                            if (locate1 !== "" && locate1.match(alphaExp)) {
                                                if (adder !== "") {
                                                    adding(select,syear,eyear,pemail,oemail,linkId1,skyId1,company,curcom,locate1,adder,phoneNumber1,aurId1,name1);
                                                }
                                                else {
                                                    adder1.focus();
                                                    document.getElementById('invalid13').innerHTML = "*Fill Address";
                                                }
                                            }
                                            else {
                                                locate2.focus();
                                                document.getElementById('invalid12').innerHTML = "*Fill Location";
                                            }
                                        }
                                        else {
                                            curcom1.focus();
                                            document.getElementById('invalid11').innerHTML = "*Fill Designatiojn";

                                        }
                                    }
                                    else {
                                        company1.focus();
                                        document.getElementById('invalid10').innerHTML = "*Fill company";

                                    }

                                }
                                else {
                                    skyId2.focus();
                                    document.getElementById('invalid9').innerHTML = "*Fill Skype Id";
                                }
                            }
                            else {
                                linkId2.focus();
                                document.getElementById('invalid8').innerHTML = "*Fill linkdin Id";
                            }
                        }
                        else {
                            oemail1.focus();
                            document.getElementById('invalid7').innerHTML = "*Fill email/invalid email";
                        }
                    }
                    else {
                        pemail1.focus();
                        document.getElementById('invalid6').innerHTML = "*Fill email/invalid email";
                    }
                }
                else {


                    document.getElementById('invalid5').innerHTML = "*Select Year Course";
                }
            }
            else {

                document.getElementById('invalid4').innerHTML = "*Select Year Course";

            }
        }
        else {
            document.getElementById('invalid3').innerHTML = "*Please Select One Course";
            select1.focus();
        }
    }
    else {
        document.getElementById('invalid1').innerHTML = "*invalid Name";
        name2.focus();
    }
}
function adding(val,val1,val2,val3,val4,val5,val6,val7,val8,val9,val10,val11,val12,val13){
var select=val;
var syear=val1;
var eyear=val2;
var pemail=val3;
var oemail=val4;
var linkId1=val5;
var skyId1=val6;
var company=val7;
var curcom=val8;
var locate1=val9;
var adder=val10;
var phoneNumber1=val11;
var aurId1=val12;
var name1=val13;

var node=pemail.split("@");
console.log(node);
var db=firebase.database();
db.ref('/alumni_info/'+node[0]).set(
    {
            "Address" : adder,
            "AurId" : aurId1,
            "Company" : company,
            "Course" : select,
            //"DOB" : 12345678909090,
            "Designation" : curcom,
            "Name" : name1,
            "oemail" : oemail,
            "pemail" : pemail,
            "Phone" : phoneNumber1,
            "Year" : syear+"-"+eyear,
            "linkdin" : linkId1,
            "location" : locate1,
            "skypeId" : skyId1,
            "uid" : "123456"
          
        
    }
    );
    localStorage.setItem("name",name1);
    localStorage.setItem("node",node[0]);
    localStorage.setItem("uid","123456");
    console.log("Node is created");
    var y=confirm("You want to go to main page ");
    if(y==true){
        location.href="first.html";
    }
    else{
        location.reload();
    }
}



        </script>
</body>
</html>